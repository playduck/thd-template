% Robin Prillwitz 2022

\KOMAoptions{
  fontsize    = 11pt,
  paper       = a4,
  twoside     = true,
  parskip     = half,
  pagesize    = false,
  usegeometry = true
}



\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}

% LOCAL
\usepackage[ngerman]{babel}
\usepackage[iso,german]{isodate}
\usepackage{hyphenat}
\hyphenation{Mathe-matik wieder-gewinnen}
\usepackage[babel=true]{csquotes}

% APPENDIX
\usepackage[toc,page]{appendix}
\renewcommand{\appendixpagename}{\section*{Anhang}}
\renewcommand{\appendixtocname}{Anhang}

% COLOR
\usepackage[usenames,dvipsnames,svgnames,table]{xcolor}

% Colors of THD faculties
\definecolor{THDGreen}      {HTML}{13a538}% BIW
\definecolor{THDDarkRed}    {HTML}{b2110e}% AWW
\definecolor{THDYellow}     {HTML}{ffd500}% EMT
\definecolor{THDStrongBlue} {HTML}{0085c8}% MB-MK
\definecolor{THDPurple}     {HTML}{59358c}% NUW
\definecolor{THDOrange}     {HTML}{f18700}% AGW
\definecolor{THDBrightRed}  {HTML}{e73d55}% AI
\definecolor{THDCyan}       {HTML}{17a2b0}% ECRI

% Additional Colors
\definecolor{THDWhite}      {HTML}{ffffff}
\definecolor{THDBlack}      {HTML}{000000}
\definecolor{THDGrey}       {HTML}{313131}
\definecolor{THDDonauBlau}  {HTML}{009fe3}% Website custom.css:root
\definecolor{THDBlau}       {HTML}{1a4273}% Website custom.css:root

% Global document highlight color
\colorlet{HighlightColor}{THDBlau}
\newcommand\HighlightColor{\color{HighlightColor}}

% FONT COLOR
\addtokomafont{disposition}{\HighlightColor\sffamily}
\newcommand{\subsubsubsection}[1]{\paragraph{#1}\mbox{}\\}
\newcommand{\centersection}[1]{
  {
  \onehalfspacing
  \phantomsection
  \begin{center}
    \normalfont\sectfont\nobreak{#1}
  \end{center}
  \vspace{-0.5em}
  }%
}

% FONT
\usepackage{fontspec}
\usepackage{textcomp}
\newfontfamily\Verdana{Verdana}[Scale=MatchLowercase, Ligatures=TeX]
\newfontfamily\Helvetica{Helvetica Neue}[Scale=MatchLowercase, Ligatures=TeX]
\newfontfamily\FiraCode{Fira Code}[Scale=MatchLowercase, Ligatures=TeX]
\newfontfamily\MinionPro{Minion Pro}[Scale=MatchLowercase, Ligatures=TeX]
\setsansfont[
  Ligatures=TeX]{Helvetica Neue}
\setmonofont[
  Scale       = MatchLowercase,
  Ligatures   = TeX,
  Contextuals = {Alternate}]{Fira Code}
\setmainfont[
  Scale       = MatchLowercase,
  ScaleAgain  = 1.08,
  LetterSpace = 2.5,
  Ligatures   = TeX]{Minion Pro}

\newcommand{\threeast}{\bigskip\bigskip\par\centerline{*\quad*\quad*}\bigskip\par}%

% UTIL
\usepackage{lipsum}
\usepackage{ragged2e}
\usepackage{seqsplit}
\usepackage{tabto}
\usepackage{setspace}
\usepackage{multicol}
\usepackage{hologo}
\usepackage[nopatch=eqnum]{microtype}
\usepackage[inline]{enumitem}
\setlist{itemsep=0em, parsep=0em} % remove inter-item spacing

\usepackage{url}
\usepackage{pdfpages}
\usepackage{accsupp}
\usepackage{letltxmacro}
\usepackage{ifplatform}
\renewcommand{\macosxname}{{\Helvetica MacOs}}
\usepackage[defaultlines=3, all]{nowidow}
\brokenpenalty10000\relax

\newcommand{\emptypage}{{
  \clearpage
  \singlespacing
  \begin{center}
  \scriptsize Diese Seite wurde absichtlich leer gelassen.
  \end{center}
  \newpage
}
}

% FIGURE
\usepackage{float}
\usepackage[margin=15pt,font=footnotesize,labelfont={color=HighlightColor,bf,sf}]{caption}
\usepackage{subcaption}
\usepackage{wrapfig}
% \usepackage{bigfoot}
\interfootnotelinepenalty=10000

% GRAPHIC
\usepackage{graphicx}
\usepackage{grffile}
\graphicspath{{img/}}

% TABLE
\usepackage{tabularx}
\newcolumntype{Y}{>{\centering\arraybackslash}X}
\captionsetup[table]{labelformat=simple, labelsep=colon}
\captionsetup[subtable]{labelformat=simple, labelsep=colon}

% TOC
\usepackage{tocloft}
\addto\captionsngerman{\renewcommand*\contentsname{Inhaltsverzeichnis}}
\addto\captionsngerman{\renewcommand*\listfigurename{Abbildungsverzeichnis}}
\addto\captionsngerman{\renewcommand*\listtablename{Tabellenverzeichnis}}
\setcounter{secnumdepth}{4}
\setcounter{tocdepth}{4}

% HEADER & FOOTER
\usepackage{scrlayer}
\usepackage[]{scrlayer-scrpage}
\ofoot*{\pagemark}
\cfoot*{}
\setlength{\skip\footins}{10mm plus 2mm}

% scale marginnotes to footnote size
\let\oldmarginpar\marginpar
\renewcommand\marginpar[2][]{%
\oldmarginpar[\footnotesize #1]{\footnotesize #2}}

% Make typearea (KOMA Script) default
% however make newgeometry available
% \usepackage{typearea}
% \usepackage[]{showframe} % debug

% uncomment for bleed
% 4mm bleed (2mm on each edge)
% \usepackage[width=214truemm,height=301truemm,center]{crop}

\usepackage[]{geometry}

% MATH
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage[locale=DE]{siunitx}

% square root hack
% adds a trailing vertical edge to square roots
\makeatletter
  \let\oldr@@t\r@@t
  \def\r@@t#1#2{%
  \setbox0=\hbox{$\oldr@@t#1{#2\,}$}\dimen0=\ht0
  \advance\dimen0-0.2\ht0
  \setbox2=\hbox{\vrule height\ht0 depth -\dimen0}%
  {\box0\lower0.4pt\box2}}
  \LetLtxMacro{\oldsqrt}{\sqrt}
  \renewcommand*{\sqrt}[2][\ ]{\oldsqrt[#1]{#2} }
\makeatother

% FLOAT COUNTER
\floatstyle{ruled}
\newfloat{program}{thp}{lop}
\floatname{program}{Program}
\floatname{figure}{Abbildung}
\renewcommand{\thetable}{\arabic{table}}
\renewcommand{\thefigure}{\arabic{figure}}

% TIKZ & PGF
\usepackage{tikz}
\usetikzlibrary{patterns}
\usetikzlibrary{calc}
\usetikzlibrary{shapes}
\usetikzlibrary{decorations.markings}
\usetikzlibrary{arrows,snakes,automata,backgrounds,petri}
\usepackage{tikz-timing}
\usetikztiminglibrary[rising arrows]{clockarrows}
\usepackage{tikzpagenodes}
\usepackage[european, betterproportions]{circuitikz}
\usepackage{pgfplots}
\usepackage{pgfplotstable}
\usepackage{pgfgantt}
\pgfplotsset{
  compat=1.18, % lastest release as of 2022-07-02
  table/search path={./data},
}
\usepackage{xparse}
\NewDocumentCommand{\busref}{som}{\texttt{%
#3%
\IfValueTF{#2}{[#2]}{}%
\IfBooleanTF{#1}{\#}{}%
}}

% CODE
\usepackage{dirtree}
\usepackage{listings}
\renewcommand\lstlistingname{Sourcecode} % Change language of section name
\lstset{ % General setup for the package
    language=C++,
    rangeprefix=//\ ---\ ,rangesuffix=\ ---,
    includerangemarker=false,
    numberstyle=\FiraCode\color{black},
    basicstyle=\FiraCode\color{black},
    backgroundcolor=\color{White},
    keywordstyle=\color{Orchid}\bfseries,
    rulesepcolor=\color{DarkGray},
    rulecolor=\color{Black},
    stringstyle=\color{Emerald},
    commentstyle=\color{LightSlateGrey},
    directivestyle={\color{RoyalPurple}},
    %
    emph={},
    emphstyle={\color{BlueViolet}},
    %
    otherkeywords = {;,<<,>>,++,|},
    keywordstyle=\color{WildStrawberry},
    literate={{*}{\texttt{*}}1},% replace fira-code asterist ligature
    numbers=left,
    frame=shadowbox,
    tabsize=4,
    columns=fixed,
    showstringspaces=true,
    showtabs=false,
    showspaces=false,
    keepspaces,
    breaklines=true,
    postbreak=\raisebox{0ex}[0ex][0ex]{\BeginAccSupp{ActualText={}}\ensuremath{\color{gray}\hookrightarrow\space}\EndAccSupp{}},
    captionpos=b,
    title=\lstname,
    float,
    belowskip=-0.2cm
}

% INCLUDES
\input{./src/preamble/meta.tex}
\input{./src/preamble/bibliography.tex}
\input{./src/preamble/glossary.tex}

% LINKS
\usepackage[hidelinks]{hyperref}
\urlstyle{tt}

\KOMAoptions{
  BCOR=15mm,
  DIV=default
}
